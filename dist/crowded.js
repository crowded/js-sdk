!function(n){var t={};function e(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var i in n)e.d(r,i,function(t){return n[t]}.bind(null,i));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=0)}([function(n,t,e){"use strict";function r(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=[],r=!0,i=!1,o=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done)&&(e.push(a.value),!t||e.length!==t);r=!0);}catch(n){i=!0,o=n}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return e}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function o(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function a(n,t,e){return t&&o(n.prototype,t),e&&o(n,e),n}function c(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}e.r(t),e.d(t,"default",function(){return s});var u=function(){function n(t,e){var o=this;if(i(this,n),c(this,"frame",void 0),c(this,"ready",!1),c(this,"callbacks",{}),c(this,"state",{location:{pathname:""}}),c(this,"pendingMethods",[]),c(this,"watchers",{transition:"WatchTransitions",scroll:"WatchScrollPosition"}),c(this,"CapturePostMessages",function(){window.addEventListener("message",function(n){if(n.origin===s.config.domain){var t=n.data?JSON.parse(n.data):{};t.crowdedEvent&&o.callbacks[t.crowdedEvent]&&o.callbacks[t.crowdedEvent].forEach(function(n){return n(t.data)})}})}),c(this,"Call",function(n){var t=r(n,2),e=t[0],i=t[1];o.ready&&o.frame.contentWindow?o.frame.contentWindow.postMessage(JSON.stringify({method:e,value:i}),s.config.domain):o.pendingMethods.push(n)}),!s.config.domain)throw new Error("Missing Crowded configuration. Make sure set Crowded.config = { ... } before initializing an Embed");if("IFRAME"!=t.nodeName)throw new TypeError("Parameter of new Crowded.Embed(...) must be Iframe DOM Element");this.frame=t,this.Call(["Connect",e]),this.onTransition(function(n){return o.state=n}),this.on("initialized",function(){o.ready=!0,o.pendingMethods.forEach(function(n){return o.Call(n)})}),this.CapturePostMessages(),this.to("")}return a(n,[{key:"to",value:function(n){"/"!=n[0]&&(n="/"+n),n!=this.state.location.pathname&&(this.state.name?this.Call(["Navigate",n]):this.frame.src=s.config.domain+n)}},{key:"configure",value:function(n){this.Call(["Configure",n])}},{key:"on",value:function(n,t,e){if("function"!=typeof t)throw new TypeError("Second parameter of Crowded.Embed.on() must be a function");if(!this.callbacks[n]){this.callbacks[n]=[];var r=!!Object.keys(this.watchers).includes(n)&&this.watchers[n];r&&this.Call([r,e])}this.callbacks[n].push(t)}},{key:"onScroll",value:function(n){this.on("scroll",n)}},{key:"onTransition",value:function(n){this.on("transition",n)}}]),n}(),s=function(){function n(t){i(this,n),n.config=t}return a(n,null,[{key:"config",set:function(n){this._config=n},get:function(){return this._config}}]),n}();c(s,"_config",void 0),c(s,"Embed",u)}]);